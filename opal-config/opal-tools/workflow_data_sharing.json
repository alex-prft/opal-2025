{
  "name": "OSA Workflow Data Sharing",
  "description": "Core workflow data sharing and communication tools for OSA personalization strategy agents",
  "discovery_url": "https://opal-2025.vercel.app/api/tools/workflow-data/discovery",
  "registry_id": "osa_workflow_data",
  "version": "1.0.0",
  "tools": [
    {
      "name": "osa_store_workflow_data",
      "description": "Store agent results in shared workflow context for use by subsequent agents",
      "input_schema": {
        "type": "object",
        "properties": {
          "agent_id": {
            "type": "string",
            "description": "ID of the agent storing data (content_review, geo_audit, etc.)"
          },
          "agent_results": {
            "type": "object",
            "description": "Complete structured results from the agent execution"
          },
          "workflow_id": {
            "type": "string",
            "description": "Unique identifier for the workflow execution"
          },
          "execution_order": {
            "type": "number",
            "description": "Sequential order of agent execution (1-6)"
          },
          "data_quality_score": {
            "type": "number",
            "description": "Quality score of the data (0.0-1.0)"
          },
          "timestamp": {
            "type": "string",
            "description": "ISO timestamp of data storage"
          }
        },
        "required": ["agent_id", "agent_results", "workflow_id", "execution_order"]
      }
    },
    {
      "name": "osa_retrieve_workflow_context",
      "description": "Retrieve accumulated workflow context data for current agent execution",
      "input_schema": {
        "type": "object",
        "properties": {
          "workflow_id": {
            "type": "string",
            "description": "Unique identifier for the workflow execution"
          },
          "requesting_agent": {
            "type": "string",
            "description": "ID of agent requesting context data"
          },
          "include_agents": {
            "type": "array",
            "description": "Specific agent IDs to include in context (empty = all previous)"
          }
        },
        "required": ["workflow_id", "requesting_agent"]
      }
    },
    {
      "name": "osa_send_data_to_osa_webhook",
      "description": "Send agent data and results to OSA application via webhook for real-time updates",
      "input_schema": {
        "type": "object",
        "properties": {
          "agent_name": {
            "type": "string",
            "description": "Name of the agent sending data (matches OSA endpoint schema)"
          },
          "execution_results": {
            "type": "object",
            "description": "Agent execution results and insights (matches OSA endpoint schema)"
          },
          "workflow_id": {
            "type": "string",
            "description": "Unique workflow execution identifier"
          },
          "metadata": {
            "type": "object",
            "description": "Agent execution metadata including timestamps, success status, and quality metrics",
            "properties": {
              "execution_status": {
                "type": "string",
                "description": "Current execution status (in_progress, completed, failed, or partial)"
              },
              "execution_time_ms": {
                "type": "number",
                "description": "Agent execution time in milliseconds"
              },
              "timestamp": {
                "type": "string",
                "description": "ISO timestamp of execution"
              },
              "success": {
                "type": "boolean",
                "description": "Whether the agent execution was successful"
              }
            }
          },
          "webhook_endpoint": {
            "type": "string",
            "description": "OSA webhook endpoint (webhooks/opal-workflow or opal/workflow-results)",
            "default": "webhooks/opal-workflow"
          }
        },
        "required": ["agent_name", "execution_results", "workflow_id", "metadata"]
      }
    },
    {
      "name": "osa_validate_workflow_data",
      "description": "Validate workflow data quality and completeness before agent execution",
      "input_schema": {
        "type": "object",
        "properties": {
          "workflow_id": {
            "type": "string",
            "description": "Workflow execution identifier"
          },
          "validation_criteria": {
            "type": "object",
            "description": "Criteria for data quality validation"
          },
          "minimum_quality_score": {
            "type": "number",
            "description": "Minimum acceptable quality score"
          }
        },
        "required": ["workflow_id"]
      }
    },
    {
      "name": "osa_compile_final_results",
      "description": "Compile all workflow agent results into comprehensive strategy brief for final delivery",
      "input_schema": {
        "type": "object",
        "properties": {
          "workflow_id": {
            "type": "string",
            "description": "Workflow execution identifier"
          },
          "compilation_format": {
            "type": "string",
            "description": "Output format for compiled results (executive_summary, detailed_brief, or comprehensive)"
          },
          "include_quality_metrics": {
            "type": "boolean",
            "description": "Include data quality and validation metrics"
          },
          "delivery_endpoints": {
            "type": "array",
            "description": "OSA endpoints for result delivery"
          }
        },
        "required": ["workflow_id"]
      }
    }
  ],
  "authentication": {
    "type": "hmac_signature",
    "signature_algorithm": "sha256",
    "signature_header": "X-OSA-Signature",
    "timestamp_included": true,
    "secret_env_var": "OPAL_WEBHOOK_HMAC_SECRET",
    "fallback_auth": {
      "type": "header",
      "header_name": "Authorization",
      "header_value": "Bearer ${OPAL_WORKFLOW_TOKEN}"
    }
  },
  "integration_endpoints": {
    "data_storage": "${OSA_BASE_URL}/api/opal/workflow-data",
    "osa_webhook_agent": "${OSA_BASE_URL}/api/webhooks/opal-workflow",
    "osa_webhook_results": "${OSA_BASE_URL}/api/opal/workflow-results",
    "validation_service": "${OSA_BASE_URL}/api/opal/validate"
  },
  "environment_config": {
    "development": {
      "base_url": "http://localhost:3000",
      "timeout_ms": 10000
    },
    "production": {
      "base_url": "https://opal-2025.vercel.app",
      "timeout_ms": 30000
    }
  }
}